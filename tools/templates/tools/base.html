{% load static tailwind_tags %}
{% load static %}
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <title>{% block head_title %}Arcus{% endblock %}</title>
    <link rel="icon" href="{% static 'content/img/logos/logo.gif' %}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
    <script src="//unpkg.com/alpinejs" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    {% tailwind_css %}
    <script src="{% static 'js/htmx.min.js' %}"></script>
    {% block head %}{% endblock %}
    {% block styles %}{% endblock %}
</head>

<body
        class="bg-skin-base text-lg text-skin-base"
        hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
        :data-theme="theme" x-data="{ theme : $persist('light'), toggleTheme() { this.theme = this.theme === 'dark' ? 'light' : 'dark' }}">
<c-navbar></c-navbar>
<div class="flex flex-col md:flex-row min-h-nav-offset mx-auto pt-20">
    <!-- Sidebar -->
    <c-sidenav>
        <li class="mb-4" :class="expandSidebar ? 'ml-2' : 'ml-0'">
            <c-arcus.link href="{% url 'tools:retirement_calculator' %}" class="flex items-center">
                <c-icons.trending-up class="inline-block mr-2"/>
                <span x-show="expandSidebar">Retirement Calculator</span>
            </c-arcus.link>
        </li>
    </c-sidenav>

    <!-- Main Content -->
    <main class="flex-1 bg-skin-base mx-auto px-4 py-8 overflow-y-auto">
        {% block before_content %}{% endblock %}
        {% block content %}{% endblock %}
    </main>
</div>

{% block javascript %}{% endblock %}

<script>
    (function () {

        document.addEventListener('DOMContentLoaded', function () {
            const navbarHeight = document.querySelector('nav').offsetHeight;

            // Adjust scrolling to each anchor section
            document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();

                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);

                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - navbarHeight, // Adjust by navbar height
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });

        document.body.addEventListener('htmx:configRequest', (event) => {
            event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
        })
    })();
</script>
</body>
</html>
