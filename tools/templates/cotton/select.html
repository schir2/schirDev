<!-- templates/cotton/select.html -->
{% load widget_tweaks %}

<c-vars
        label=""
        help_text=""
        extra_select_classes=""
        extra_option_classes=""

/>

    <div class="form-group">
        {% if label %}
            <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                {{ label }}
            </label>
        {% endif %}
        <select name="{{ field.html_name }}"
                id="{{ field.auto_id }}"
                x-model="{{ x_model }}"
                class="block w-full mt-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 {{ extra_select_classes }}"
                {% if field.field.required %}required{% endif %}>
            {% for option in field %}
                {% if option.is_group %}
                    <optgroup label="{{ option.label }}">
                        {% for sub_option in option.options %}
                            <option value="{{ sub_option.data.value }}"
                                    {% if sub_option.is_selected %}selected{% endif %}
                                    class="{{ extra_option_classes }}">
                                {{ sub_option.data.label }}
                            </option>
                        {% endfor %}
                    </optgroup>
                {% else %}
                    <option value="{{ option.data.value }}"
                            {% if option.is_selected %}selected{% endif %}
                            class="{{ extra_option_classes }}">
                        {{ option.data.label }}
                    </option>
                {% endif %}
            {% endfor %}
        </select>

        {% if help_text %}
            <p class="mt-1 text-sm text-gray-500">{{ help_text }}</p>
        {% endif %}

        {% if field.errors %}
            <div class="text-red-500 text-sm mt-1">
                {% for error in field.errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            </div>
        {% endif %}
    </div>